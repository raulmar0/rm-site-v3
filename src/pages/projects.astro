---
import ProfileLayout from "../layouts/profile-layout.astro"
import Post from "../components/post.astro"

const response = await fetch('https://rmperso-pb.fly.dev/api/collections/projects/records?sort=+created');
const data = await response.json();
const projects = data.items;

---
<ProfileLayout currentUrl="projects">
  { projects.map((project: any) => (
    <Post
      useServerUrl={true}
      profilePic={project.profilepic}
      title={project.title}
      description={project.description}
      thumbnail={project.thumbnail}
      buttonsObj={{Demo: project.demo, Repo: project.repo}}
      collectionId={project.collectionId}
      id={project.id}
    />
  ))
  }
</ProfileLayout>
